<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script src="sigma.resources/sigma.min.js"></script>
<script src="sigma.resources/sigma.canvas.edgehovers.def.js"></script>
<script src="sigma.resources/sigma.renderers.edgeLabels.min.js"></script>

<script src="clickFunctionality.js"></script>
<script src=dijkstra.js></script>


<link rel="stylesheet" href="index.css">

<html>
<head>
    <title>Eman's Graph Tool</title>
</head>
<body id="base">

<div>
    <button onclick="calculatePath(1,10)">GET SOURCE/EDGE</button>
</div>

<script>

    const s = new sigma({
        renderer: {
            container: document.getElementById('base'),
            type: 'canvas'
        },
        settings: {
            borderSize: 3,
            defaultNodeBorderColor: "#c9ddff",
            defaultEdgeLabelSize: 20,
            enableEdgeHovering: true,
            edgeHoverSizeRatio: 2,
            edgeHoverExtremities: true,
            autoRescale: false
        }
    });

    $('#base').dblclick(function (e) {
        e.stopPropagation();
    });

    $(document).bind("contextmenu", function (event) {
        event.preventDefault();
    });

    function calculatePath(srcNode, destNode) {
        const srcNodeColour = "#001299";
        const destNodeColour = "#991600";
        const pathColour = "#6e0db6";

        const path = s.graph.dijkstra(srcNode, destNode);

        if (path) {
            for (let i = 0; i < path.length; i++) {

                (function (index) {
                    setTimeout(function () {
                        path[index].color = pathColour;
                        s.refresh();
                    }, i * 1000)
                })(i);
            }
        }

        s.graph.nodes(srcNode).color = srcNodeColour;
        s.graph.nodes(destNode).color = destNodeColour;
    }
</script>
</body>
</html>
